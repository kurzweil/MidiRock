drum_data = """
4B0000087F7F7F7F00000000000000000000000002000200020002008B6B
4B0204 087F7F7F 7F000000 00000054 00000000 00020002 00020002 00C485
4b1000087f7f7f7f000000000000000000000000020002000200020075c4
4b0404087f7f7f7f0000000000a8000000000000020002000200020038a1
4b0404087f7f7f7f00000000002a00000000000002000200020002003ac0
4b0804087f7f7f7f0000000054000000000000000200020002000200affc
4b0804087f7f7f7f000000002a0000000000000002000200020002000e7c
4b0104087f7f7f7f000000000000002a000000000200020002000200f7bc
4b0104087f7f7f7f00000000000000540000000002000200020002005e02
4b0104087f7f7f7f000000000000007e0000000002000200020002003968
4b0104087f7f7f7f00000000000000a80000000002000200020002000f3f
4b0204087f7f7f7f000000000000a8000000000002000200020002003879
4b0204087f7f7f7f0000000000002a00000000000200020002000200bafb
"""



# width=16  poly=0x8005  init=0x787e  refin=true  refout=true  xorout=0x0000  check=0xb33a  residue=0x0000

import crcmod

# poly=0x8005 â†’ becomes 0x18005 for crcmod
crc16 = crcmod.mkCrcFun(
    poly=0x18005,
    initCrc=0xFFFF,
    rev=True,
    xorOut=0xFFFF
)

from crc import Calculator, Crc16

calculator = Calculator(Crc16.USB)

for data in drum_data.strip().split("\n"):
    data = bytes.fromhex(data)
    actual = crc16(data[:-2]) 
    actual2 = calculator.checksum(data[:-2]) 
    expected = data[-2:]
    print(f"{data.hex()} {(data[:-2]).hex()} {expected.hex()} {actual:04x} {actual2:04x}")